# ============================================================
# Crawl4AI Adaptive Crawler v3.6.0 - Requirements
# ============================================================
# All 6 Solutions Applied:
#   SOLUTION 1: Aggressive stopping prevention
#   SOLUTION 2: Better multilingual embedding model (mpnet)
#   SOLUTION 3: Better re-ranking weights
#   SOLUTION 4: More query variations
#   SOLUTION 5: Deeper crawling
#   SOLUTION 6: Proper content extraction
# ============================================================

# ============================================================
# CORE: Web Crawling Framework
# ============================================================
# AdaptiveCrawler with semantic link selection
# Supports embedding strategy for intelligent crawling
crawl4ai>=0.7.0

# Playwright for browser automation
# Required for JavaScript rendering and .asp file parsing
playwright>=1.40.0

# ============================================================
# SOLUTION 2: LOCAL Multilingual Embedding Models
# ============================================================
# SOLUTION 2: Upgraded from MiniLM to mpnet-base-v2
# Model: paraphrase-multilingual-mpnet-base-v2
# - Better semantic understanding for legal documents
# - Supports 50+ languages (Chinese, English, Portuguese, etc.)
# - Runs locally on server (NO API CALLS during crawling)
# - Size: ~500MB (pre-downloaded in Docker)
sentence-transformers>=2.2.0

# Deep learning framework for embeddings
torch>=2.0.0

# Transformers for sentence-transformers models
transformers>=4.30.0

# ============================================================
# WEB FRAMEWORK & ASYNC
# ============================================================
# FastAPI for REST API
fastapi>=0.104.1

# ASGI server for production
uvicorn[standard]>=0.24.0

# SOLUTION 3: Async HTTP client for API calls (DeepSeek, OpenRouter)
# Used for:
#   - DeepSeek API (answer generation)
#   - OpenRouter API (SOLUTION 3: re-ranking with embeddings)
httpx>=0.25.1

# ============================================================
# SOLUTION 3: OpenRouter Re-ranking Dependencies
# ============================================================
# For cosine similarity calculations in re-ranking
# SOLUTION 3: 75% semantic + 25% BM25 weighting
numpy>=1.24.3

# ============================================================
# DATA VALIDATION & SERIALIZATION
# ============================================================
# Pydantic for request/response validation
pydantic>=2.5.0

# ============================================================
# OPTIONAL: Performance & Monitoring (Recommended)
# ============================================================
# Async context manager support
aiofiles>=23.2.0

# Better logging
python-dotenv>=1.0.0

# ============================================================
# DEVELOPMENT DEPENDENCIES (Optional)
# ============================================================
# Uncomment if developing/debugging:
# pytest>=7.4.0
# pytest-asyncio>=0.21.0
# black>=23.0.0
# flake8>=6.0.0

# ============================================================
# VERSION NOTES
# ============================================================
#
# crawl4ai>=0.7.0
#   - Supports AdaptiveCrawler with embedding strategy
#   - SOLUTION 5: Deeper crawling capabilities
#   - Better .asp file handling (SOLUTION 6)
#
# sentence-transformers>=2.2.0
#   - SOLUTION 2: Updated embedding library
#   - Supports paraphrase-multilingual-mpnet-base-v2
#   - Better Chinese language support
#
# torch>=2.0.0
#   - Required for sentence-transformers models
#   - GPU acceleration optional (CPU works fine)
#
# transformers>=4.30.0
#   - Hugging Face transformers library
#   - Required for language model inference
#
# fastapi>=0.104.1
#   - Modern async Python web framework
#   - Automatic API documentation (/docs, /redoc)
#
# uvicorn[standard]>=0.24.0
#   - ASGI application server
#   - Production-ready
#
# httpx>=0.25.1
#   - Modern async HTTP client
#   - Replaces requests for async operations
#   - Used for DeepSeek & OpenRouter API calls
#
# pydantic>=2.5.0
#   - Data validation and serialization
#   - Request/response schemas
#
# numpy>=1.24.3
#   - Numerical computing for cosine similarity
#   - SOLUTION 3: Re-ranking calculations
#
# ============================================================
# INSTALLATION
# ============================================================
#
# Create virtual environment:
#   python -m venv venv
#   source venv/bin/activate  # On Windows: venv\Scripts\activate
#
# Install dependencies:
#   pip install -r requirements.txt
#
# For Docker:
#   docker build -t crawl4ai-fixed:v3.6.0 .
#
# ============================================================
# DISK SPACE REQUIREMENTS
# ============================================================
#
# Minimum:
#   - Python packages: ~2GB
#   - Playwright browsers: ~1.2GB
#   - Sentence-transformers model: ~500MB
#   - Total: ~3.7GB
#
# Recommended:
#   - Add 500MB buffer for runtime
#   - Total: ~4.2GB
#
# On Zeabur: Usually included in container allocation
#
# ============================================================
# DEPENDENCY COMPATIBILITY
# ============================================================
#
# Python Version: 3.11+ (specified in Dockerfile)
#   - All packages support Python 3.11
#   - FastAPI and Pydantic v2 are 3.11 optimized
#
# torch (CPU vs GPU):
#   - Current spec: CPU version (lighter, suitable for servers)
#   - GPU version: pip install torch --index-url https://download.pytorch.org/whl/cu118
#
# Playwright:
#   - Installs Chromium, Firefox, WebKit
#   - Required for crawl4ai-setup
#   - ~1.2GB download (done in Docker)
#
# ============================================================
# SOLUTION MAPPING TO REQUIREMENTS
# ============================================================
#
# SOLUTION 1 (Aggressive Stopping Prevention)
#   → Implemented in main.py AdaptiveConfig
#   → No specific package requirement
#
# SOLUTION 2 (Better Embedding Model)
#   → sentence-transformers>=2.2.0 (supports mpnet-base-v2)
#   → torch>=2.0.0 (inference engine)
#   → transformers>=4.30.0 (model loading)
#
# SOLUTION 3 (Better Re-ranking Weights)
#   → httpx>=0.25.1 (OpenRouter API calls)
#   → numpy>=1.24.3 (cosine similarity calculations)
#
# SOLUTION 4 (More Query Variations)
#   → Implemented in main.py AdaptiveConfig
#   → No specific package requirement
#
# SOLUTION 5 (Deeper Crawling)
#   → crawl4ai>=0.7.0 (better crawling capabilities)
#   → playwright>=1.40.0 (robust browser control)
#
# SOLUTION 6 (Proper Content Extraction)
#   → crawl4ai>=0.7.0 (improved markdown extraction)
#   → playwright>=1.40.0 (better .asp file parsing)
#
# ============================================================
# SECURITY NOTES
# ============================================================
#
# API Keys:
#   - NEVER commit .env file with real keys
#   - Use environment variables or .env.local
#   - See .env.example for template
#
# Dependency Scanning:
#   - Regularly run: pip list --outdated
#   - Update major versions with caution
#   - Test in staging before production
#
# ============================================================
